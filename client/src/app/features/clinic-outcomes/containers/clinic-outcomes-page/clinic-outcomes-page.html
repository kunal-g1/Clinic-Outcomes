<section class="wrapper">
  <header class="co-header">
    <h1>Clinic Outcomes</h1>
  </header>

  <div class="co-actions">
    <app-period-selector
      [period]="period()"
      (periodChange)="onPeriodChange($event)"
    ></app-period-selector>

    <button class="btn-print" type="button" aria-label="Print">
      <svg class="icon" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
        <path
          d="M6 9V3h12v6M6 17v4h12v-4M6 13H5a2 2 0 0 0-2 2v2h4m10 0h4v-2a2 2 0 0 0-2-2h-1M8 7h8"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
      <span>Print</span>
    </button>
  </div>

  <app-summary-bar
    [activePatients]="selActive()"
    [period]="selPeriod()"
    [start]="selRange().start"
    [end]="selRange().end"
    [lastUpdated]="selLastUpdated()"
  ></app-summary-bar>

  <div class="grid">
    <div class="card">
      <header class="card-header">
        <h2>Time in range</h2>
        <div class="info-tip">
          <button class="icon-info" aria-label="More info">i</button>

          <!-- bubble -->
          <div class="tip-bubble" role="tooltip">
            Based on standard of care ranges for Time in range.
          </div>
        </div>
      </header>

      <app-time-in-range-chart [data]="selTir()"></app-time-in-range-chart>

      <footer class="tir-scale">
        <div class="ticks">
          <span>40</span><span>54</span><span>70</span> <span>180</span><span>240</span
          ><span>400</span>
        </div>

        <div class="bars">
          <i class="seg red"></i>
          <i class="seg red hatch"></i>
          <i class="seg green"></i>
          <i class="seg yellow hatch"></i>
          <i class="seg orange"></i>
        </div>

        <div class="units">mg/dL</div>
      </footer>
    </div>

    <div class="card">
      <header class="card-header">
        <h2>Glucose Management Indicator (GMI)</h2>
      </header>

      <div class="gmi-avg">
        <div class="gmi-label">AVERAGE GMI</div>
        <div class="gmi-value">{{ selGmi()?.average ?? '—' }}<span class="unit">%</span></div>
      </div>
      <app-gmi-chart [data]="selGmi()"></app-gmi-chart>

      <footer class="gmi-scale">
        <div class="gmi-ticks"><span>≤7%</span><span>7–8%</span><span>≥8%</span></div>
        <div class="bars">
          <i class="seg green"></i>
          <i class="seg yellow"></i>
          <i class="seg red"></i>
        </div>
        <div class="units">GMI(%)</div>
      </footer>
    </div>
  </div>
</section>
